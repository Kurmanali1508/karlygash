<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>

<div class="container">
    <h1>Тест смысложизненных ориентаций</h1>
    <br>
    <div class="row">
        <h3>Показатель осмысленности жизни</h3>
        <div class="col-md-12">
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 0%; background: green;">0%</div>
            </div>
        </div>
    </div>
    <div class="row">
        <div id="barchart_values"></div>
        <p>
            <b>• Цели в жизни.</b> Баллы по этой шкале характеризуют наличие или отсутствие в жизни испытуемого целей в будущем,
            которые придают жизни осмысленность, направленность и временную перспективу.
            Низкие баллы по этой шкале даже при общем высоком уровне осмысленности жизни будут присущи человеку,
            живущему сегодняшним или вчерашним днем. <br>
            Вместе с тем высокие баллы по этой шкале могут характеризовать не только целеустремленного человека,
            но и прожектёра, планы которого не имеют реальной опоры в настоящем и не подкрепляются личной
            ответственностью за их реализацию. Эти два случая несложно различить, учитывая показатели по другим шкалам смысложизненных ориентаций.
        </p>

        <p>
            <b>• Процесс жизни,</b> или интерес и эмоциональная насыщенность жизни. Содержание этой шкалы совпадает с
            известной теорией о том, что единственный смысл жизни состоит в том, чтобы жить. Этот показатель говорит о том,
            воспринимает ли испытуемый сам процесс своей жизни как интересный, эмоционально насыщенный и наполненный смыслом.
            <br>
            Высокие баллы по этой шкале и низкие по остальным будут характеризовать гедониста, живущего сегодняшним днем.
            <b>Низкие баллы по этой шкале – признак неудовлетворенности своей жизнью в настоящем; при этом, однако,
                ей могут придавать полноценный смысл воспоминания о прошлом или нацеленность в будущее.</b>
        </p>

        <p>
            <b>• Результативность жизни,</b>или удовлетворенность самореализацией.
            Баллы по этой шкале отражают оценку пройденного отрезка жизни, ощущение того,
            насколько продуктивна и осмысленна была прожитая ее часть.
            Высокие баллы по этой шкале и низкие по остальным будут характеризовать человека, который доживает свою жизнь,
            у которого все в прошлом, но прошлое способно придать смысл остатку жизни.
            Низкие баллы – неудовлетворенность прожитой частью жизни.
        </p>

        <p>
            <b>• Локус контроля – Я</b> (Я – хозяин жизни). <br>
            Высокие баллы соответствуют представлению о себе как о сильной личности, обладающей достаточной свободой выбора,
            чтобы построить свою жизнь в соответствии со своими целями и представлениями о ее смысле. <br>
            Высокие баллы соответствуют представлению о себе как о сильной личности, обладающей достаточной свободой выбора,
            чтобы построить свою жизнь в соответствии со своими целями и представлениями о ее смысле. <br>
            <b>Низкие баллы – неверие в свои силы контролировать события собственной жизни.</b>
        </p>

        <p>
            <b> • Локус контроля – жизнь,</b> или управляемость жизни. <br>
            При высоких баллах – убеждение в том, что человеку дано контролировать свою жизнь,
            свободно принимать решения и воплощать их в жизнь. <br>
            <b>Низкие баллы – фатализм, убежденность в том, что жизнь человека неподвластна сознательному контролю,
                что свобода выбора иллюзорна и бессмысленно что-либо загадывать на будущее.</b>
        </p>
    </div>
</div>

<script src="assets/scripts.js"></script>
<script>
    $(document).ready(function () {
        let answers = localStorage.getItem('resultAnswers');
        if (!answers) {
            window.location.href = 'index.html';
        }
        answers = JSON.parse(answers);
        let ascending = {
            '-3': 1,
            '-2': 2,
            '-1': 3,
            0 : 4,
            1: 5,
            2: 6,
            3: 7,
        }
        let descending = {
            '-3': 7,
            '-2': 6,
            '-1': 5,
            0 : 4,
            1: 3,
            2: 2,
            3: 1,
        }
        let total = 0;
        let subTotal = {
            'Цели в жизни': 0,
            'Процесс жизни': 0,
            'Результативность жизни': 0,
            'Локус контроля – Я': 0,
            'Локус контроля – жизнь': 0
        }

        Object.keys(answers).forEach(key => {
            key = parseInt(key);
            let grade = questionsObject[key]['ascending'] ? ascending[answers[key]] : descending[answers[key]];

            total += grade;
            Object.keys(types).forEach(type => {
                if (types[type].includes(key)) {
                    subTotal[type] = (subTotal[type] ? subTotal[type] : 0) + grade;
               }
            });
        });

        var totalColor = total < 88 ? 'red' : total < 119 ? 'green' : 'blue';
        $('.progress-bar').css('width', ((total * 100) / 140) + '%');
        $('.progress-bar').css('background', totalColor);
        $('.progress-bar').text(total);

        google.charts.load("current", {packages:["corechart"]});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = [
                ["Element", "Вы наброли", { role: "style" } ],
            ];

            Object.keys(subTotal).forEach(sub => {
                data.push([sub, subTotal[sub], "green"])
            });

            data = google.visualization.arrayToDataTable(data);
            var view = new google.visualization.DataView(data);
            view.setColumns([0, 1,
                { calc: "stringify",
                    sourceColumn: 1,
                    type: "string",
                    role: "annotation" },
                2]);

            var options = {
                width: '100%',
                height: 300,
                bar: {groupWidth: "50%"},
                legend: { position: "none" },
            };
            var chart = new google.visualization.BarChart(document.getElementById("barchart_values"));
            chart.draw(view, options);
        }
    })
</script>
</body>
</html>