<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>

<div class="container">
    <h1>Тест смысложизненных ориентаций</h1>
    <br>
    <div class="row">
        <h3>Показатель осмысленности жизни</h3>
        <div class="col-md-12">
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 0%; background: green;">0%</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div id="barchart_values"></div>

        <div class="row">
            <table class="table">
                <tbody>
                <tr>
                    <th scope="col">Шкала</th>
<!--                    <th scope="col">Сырой балл</th>-->
                    <th scope="col">M</th>
                    <th scope="col">SD <small>М</small></th>
                    <th scope="col">Среднее</th>
                </tr>
                <tr>
                    <td class="l">Показатель осмысленности жизни</td>
<!--                    <td>73</td>-->
                    <td>103.10</td>
                    <td>15.03</td>
                    <td>88–118</td>
                </tr>
                <tr>
                    <td class="l">Цели в жизни</td>
<!--                    <td>30</td>-->
                    <td>32.90</td>
                    <td>5.92</td>
                    <td>27–39</td>
                </tr>
                <tr>
                    <td class="l">Процесс жизни</td>
<!--                    <td>23</td>-->
                    <td>31.09</td>
                    <td>4.44</td>
                    <td>27–35</td>
                </tr>
                <tr>
                    <td class="l">Результативность жизни</td>
<!--                    <td>23</td>-->
                    <td>25.46</td>
                    <td>4.30</td>
                    <td>21–30</td>
                </tr>
                <tr>
                    <td class="l">Локус контроля – Я</td>
<!--                    <td>15</td>-->
                    <td>21.13</td>
                    <td>3.85</td>
                    <td>17–25</td>
                </tr>
                <tr>
                    <td class="l">Локус контроля – жизнь</td>
<!--                    <td>12</td>-->
                    <td>30.14</td>
                    <td>5.80</td>
                    <td>24–36</td>
                </tr>
                </tbody>
            </table>
        </div>
        <p class="mt-5">
            <ul>
                <b>• Цели в жизни.</b> Баллы по этой шкале характеризуют наличие или отсутствие в жизни испытуемого целей в будущем,
                которые придают жизни осмысленность, направленность и временную перспективу.
                <ul>
                    <li>
                        Низкие баллы по этой шкале даже при общем высоком уровне осмысленности жизни будут присущи человеку,
                        живущему сегодняшним или вчерашним днем. <br>
                    </li>
                    <li>
                        Вместе с тем высокие баллы по этой шкале могут характеризовать не только целеустремленного человека,
                        но и прожектёра, планы которого не имеют реальной опоры в настоящем и не подкрепляются личной
                        ответственностью за их реализацию. Эти два случая несложно различить, учитывая показатели по другим шкалам смысложизненных ориентаций.
                    </li>
                </ul>
            </ul>
        </p>

        <p>
            <ul>
                <b>• Процесс жизни,</b> или интерес и эмоциональная насыщенность жизни. Содержание этой шкалы совпадает с
                известной теорией о том, что единственный смысл жизни состоит в том, чтобы жить. Этот показатель говорит о том,
                воспринимает ли испытуемый сам процесс своей жизни как интересный, эмоционально насыщенный и наполненный смыслом.
                <br>
                <ul>
                    <li>
                        Высокие баллы по этой шкале и низкие по остальным будут характеризовать гедониста, живущего сегодняшним днем.
                    </li>
                    <li>
                        Низкие баллы по этой шкале – признак неудовлетворенности своей жизнью в настоящем; при этом, однако,
                            ей могут придавать полноценный смысл воспоминания о прошлом или нацеленность в будущее.
                    </li>
                </ul>
            </ul>
        </p>

        <p>
            <ul>
                <b>• Результативность жизни,</b>или удовлетворенность самореализацией.
                    Баллы по этой шкале отражают оценку пройденного отрезка жизни, ощущение того,
                    насколько продуктивна и осмысленна была прожитая ее часть.
                <ul>
                    <li>
                        Высокие баллы по этой шкале и низкие по остальным будут характеризовать человека, который доживает свою жизнь,
                        у которого все в прошлом, но прошлое способно придать смысл остатку жизни.
                    </li>
                    <li>
                        Низкие баллы – неудовлетворенность прожитой частью жизни.
                    </li>
                </ul>
            </ul>
        </p>

        <p>
            <ul>
                <b>• Локус контроля – Я</b> (Я – хозяин жизни). <br>
                <ul>
                    <li>
                        Высокие баллы соответствуют представлению о себе как о сильной личности, обладающей достаточной свободой выбора,
                        чтобы построить свою жизнь в соответствии со своими целями и представлениями о ее смысле. <br>
                        Высокие баллы соответствуют представлению о себе как о сильной личности, обладающей достаточной свободой выбора,
                        чтобы построить свою жизнь в соответствии со своими целями и представлениями о ее смысле. <br>
                    </li>
                    <li>
                        Низкие баллы – неверие в свои силы контролировать события собственной жизни.
                    </li>
                </ul>
            </ul>
        </p>

        <p>

            <ul>
                <b>• Локус контроля – жизнь,</b> или управляемость жизни. <br>
                <ul>
                    <li>
                        При высоких баллах – убеждение в том, что человеку дано контролировать свою жизнь,
                        свободно принимать решения и воплощать их в жизнь. <br>
                    </li>
                    <li>
                        Низкие баллы – фатализм, убежденность в том, что жизнь человека неподвластна сознательному контролю,
                        что свобода выбора иллюзорна и бессмысленно что-либо загадывать на будущее.
                    </li>
                </ul>
            </ul>
        </p>
    </div>
</div>

<script src="assets/scripts.js"></script>
<script>
    $(document).ready(function () {
        let answers = localStorage.getItem('resultAnswers');
        if (!answers) {
            window.location.href = 'index.html';
        }
        answers = JSON.parse(answers);
        let ascending = {
            '-3': 1,
            '-2': 2,
            '-1': 3,
            0 : 4,
            1: 5,
            2: 6,
            3: 7,
        }
        let descending = {
            '-3': 7,
            '-2': 6,
            '-1': 5,
            0 : 4,
            1: 3,
            2: 2,
            3: 1,
        }
        let total = 0;
        let subTotal = {
            'Цели в жизни': 0,
            'Процесс жизни': 0,
            'Результативность жизни': 0,
            'Локус контроля – Я': 0,
            'Локус контроля – жизнь': 0
        }

        Object.keys(answers).forEach(key => {
            key = parseInt(key);
            let grade = questionsObject[key]['ascending'] ? ascending[answers[key]] : descending[answers[key]];

            total += grade;
            Object.keys(types).forEach(type => {
                if (types[type].includes(key)) {
                    subTotal[type] = (subTotal[type] ? subTotal[type] : 0) + grade;
                }
            });
        });

        var totalColor = total < 88 ? 'red' : total < 119 ? 'green' : 'blue';
        $('.progress-bar').css('width', ((total * 100) / 140) + '%');
        $('.progress-bar').css('background', totalColor);
        $('.progress-bar').text(total);

        google.charts.load("current", {packages:["corechart"]});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = [
                ["Element", "Вы набрали", { role: "style" } ],
            ];

            Object.keys(subTotal).forEach(sub => {
                data.push([sub, subTotal[sub], "green"])
            });

            data = google.visualization.arrayToDataTable(data);
            var view = new google.visualization.DataView(data);
            view.setColumns([0, 1,
                { calc: "stringify",
                    sourceColumn: 1,
                    type: "string",
                    role: "annotation" },
                2]);

            var options = {
                width: '100%',
                height: 600,
                bar: {groupWidth: "80%"},
                legend: { position: "none" },
            };
            var chart = new google.visualization.BarChart(document.getElementById("barchart_values"));
            chart.draw(view, options);
        }
    })
</script>
</body>
</html>